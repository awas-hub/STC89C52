C51 COMPILER V9.54   LCD1602                                                               07/29/2025 15:37:13 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN .\Objects\LCD1602.obj
COMPILER INVOKED BY: E:\DanPianji\Keil5_51\C51\BIN\C51.EXE LCD1602.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.
                    -\Listings\LCD1602.lst) OBJECT(.\Objects\LCD1602.obj)

line level    source

   1          #include <REGX52.H>
   2          
   3          sbit LCD_RS = P2^6;
   4          sbit LCD_RW = P2^5;
   5          sbit LCD_EN = P2^7;
   6          
   7          #define LCD_DataPort P0
   8          
   9          /**
  10            * @brief  LCD1602å»¶æ—¶å‡½æ•°ï¼Œ11.0592MHzè°ƒç”¨å¯å»¶æ—¶1ms
  11            * @param  æ— 
  12            * @retval æ— 
  13            */
  14          void LCD_Delay()                //@11.0592MHz
  15          {
  16   1              unsigned char i, j;
  17   1      
  18   1              i = 11;
  19   1              j = 190;
  20   1              do
  21   1              {
  22   2                      while (--j);
  23   2              } while (--i);
  24   1      }
  25          
  26          /**
  27            * @brief  LCD1602å†™å‘½ä»¤
  28            * @param  Command è¦å†™å…¥çš„å‘½ä»¤
  29            * @retval æ— 
  30            */
  31          void LCD_WriteCommand(unsigned char Command)
  32          {
  33   1              LCD_RS = 0; // å†™æŒ‡ä»¤
  34   1              LCD_RW = 0; // å†™
  35   1              LCD_DataPort = Command; // æ•°æ®è¾“å…¥
  36   1              LCD_EN = 1; // ä½¿èƒ½ æ•°æ®æœ‰æ•ˆ
  37   1              LCD_Delay();
  38   1              LCD_EN = 0;
  39   1              LCD_Delay();
  40   1      }
  41          
  42          /**
  43            * @brief  LCD1602å†™æ•°æ®
  44            * @param  Data è¦å†™å…¥çš„æ•°æ®
  45            * @retval æ— 
  46            */
  47          void LCD_WriteData(unsigned char Data)
  48          {
  49   1              LCD_RS = 1; // å†™æ•°æ®
  50   1              LCD_RW = 0; // å†™
  51   1              LCD_DataPort = Data; // æ•°æ®è¾“å…¥
  52   1              LCD_EN = 1; // ä½¿èƒ½ æ•°æ®æœ‰æ•ˆ
  53   1              LCD_Delay();
  54   1              LCD_EN = 0;
C51 COMPILER V9.54   LCD1602                                                               07/29/2025 15:37:13 PAGE 2   

  55   1              LCD_Delay();
  56   1      }
  57          
  58          /**
  59            * @brief  LCD1602è®¾ç½®å…‰æ ‡ä½ç½®
  60            * @param  Line è¡Œä½ç½®ï¼ŒèŒƒå›´ï¼š1~2
  61            * @param  Column åˆ—ä½ç½®ï¼ŒèŒƒå›´ï¼š1~16
  62            * @retval æ— 
  63            */
  64          void LCD_SetCursor(unsigned char Line,unsigned char Column)
  65          {
  66   1              if(Line==1)
  67   1              {
  68   2                      LCD_WriteCommand(0x80|(Column-1));
  69   2              }
  70   1              else if(Line==2)
  71   1              {
  72   2                      LCD_WriteCommand(0x80|(Column-1+0x40));
  73   2              }
  74   1      }
  75          
  76          /**
  77            * @brief  LCD1602åˆå§‹åŒ–å‡½æ•°
  78            * @param  æ— 
  79            * @retval æ— 
  80            */
  81          void LCD_Init(void)
  82          {
  83   1              LCD_WriteCommand(0x38); //å…«ä½æ•°æ®æ¥å£ï¼Œä¸¤è¡Œæ˜¾ç¤ºï¼Œ5*7ç‚¹é˜µ
  84   1              LCD_WriteCommand(0x0C); //æ˜¾ç¤ºå¼€ï¼Œå…‰æ ‡å…³ï¼Œé—ªçƒå…³
  85   1              LCD_WriteCommand(0x06); //æ•°æ®è¯»å†™æ“ä½œåï¼Œå…‰æ ‡è‡ªåŠ¨åŠ ä¸€ï¼Œç”»é¢ä¸åŠ¨
  86   1              LCD_WriteCommand(0x01); //æ¸…å±
  87   1      }
  88          
  89          /**
  90            * @brief  åœ¨LCD1602æŒ‡å®šä½ç½®ä¸Šæ˜¾ç¤ºä¸€ä¸ªå­—ç¬¦
  91            * @param  Line è¡Œä½ç½®ï¼ŒèŒƒå›´ï¼š1~2
  92            * @param  Column åˆ—ä½ç½®ï¼ŒèŒƒå›´ï¼š1~16
  93            * @param  Char è¦æ˜¾ç¤ºçš„å­—ç¬¦
  94            * @retval æ— 
  95            */
  96          void LCD_ShowChar(unsigned char Line, unsigned char Column, unsigned char Char)
  97          {
  98   1              LCD_SetCursor(Line,Column);
  99   1              LCD_WriteData(Char);
 100   1      }
 101          
 102          
 103          /**
 104            * @brief  åœ¨LCD1602æŒ‡å®šä½ç½®å¼€å§‹æ˜¾ç¤ºæ‰€ç»™å­—ç¬¦ä¸²
 105            * @param  Line èµ·å§‹è¡Œä½ç½®ï¼ŒèŒƒå›´ï¼š1~2
 106            * @param  Column èµ·å§‹åˆ—ä½ç½®ï¼ŒèŒƒå›´ï¼š1~16
 107            * @param  *String è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²
 108            * @retval æ— 
 109            */
 110          //è¯­è¨€åœ¨å¤„ç†æ•°ç»„ä½œä¸ºå‡½æ•°å‚æ•°æ—¶ï¼Œä¼šè‡ªåŠ¨å°†æ•°ç»„åè½¬æ¢ä¸ºæŒ‡å‘å…¶ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ
             -‡é’ˆ
 111          void LCD_ShowString(unsigned char Line,unsigned char Column,unsigned char *String)
 112          {
 113   1              unsigned char i;
 114   1              LCD_SetCursor(Line,Column);
 115   1              //char z[]="ABC" ç­‰ä»·äº char z[]={'A', 'B', 'C', '\0'};
C51 COMPILER V9.54   LCD1602                                                               07/29/2025 15:37:13 PAGE 3   

 116   1              for(i=0;String[i]!='\0';i++)
 117   1              {
 118   2                      LCD_WriteData(String[i]);
 119   2              }
 120   1      }
 121          
 122          /**
 123            * @brief  è¿”å›å€¼=Xçš„Yæ¬¡æ–¹
 124            */
 125          int LCD_Pow(int X,int Y)
 126          {
 127   1              unsigned char i;
 128   1              int Result=1;
 129   1              for(i=0;i<Y;i++)
 130   1              {
 131   2                      Result*=X;
 132   2              }
 133   1              return Result;
 134   1      }
 135          
 136          /**
 137            * @brief  åœ¨LCD1602æŒ‡å®šä½ç½®å¼€å§‹æ˜¾ç¤ºæ‰€ç»™æ•°å­—
 138            * @param  Line èµ·å§‹è¡Œä½ç½®ï¼ŒèŒƒå›´ï¼š1~2
 139            * @param  Column èµ·å§‹åˆ—ä½ç½®ï¼ŒèŒƒå›´ï¼š1~16
 140            * @param  Number è¦æ˜¾ç¤ºçš„æ•°å­—ï¼ŒèŒƒå›´ï¼š0~65535
 141            * @param  Length è¦æ˜¾ç¤ºæ•°å­—çš„é•¿åº¦ï¼ŒèŒƒå›´ï¼š1~5
 142            * @retval æ— 
 143            */
 144          void LCD_ShowNum(unsigned char Line,unsigned char Column,unsigned int Number,unsigned char Length)
 145          {
 146   1              unsigned char i;
 147   1              LCD_SetCursor(Line,Column);
 148   1              for(i=Length;i>0;i--)
 149   1              {
 150   2                      LCD_WriteData('0' + Number/LCD_Pow(10,i-1)%10);
 151   2                      /*
 152   2                      ä¾‹ï¼š
 153   2                      789 % 100 / 10 = 7
 154   2                      789 % 10  / 10 = 8
 155   2                      789 % 1   / 10 = 9
 156   2                      */
 157   2              }
 158   1      }
 159          
 160          /**
 161            * @brief  åœ¨LCD1602æŒ‡å®šä½ç½®å¼€å§‹ä»¥æœ‰ç¬¦å·åè¿›åˆ¶æ˜¾ç¤ºæ‰€ç»™æ•°å­—
 162            * @param  Line èµ·å§‹è¡Œä½ç½®ï¼ŒèŒƒå›´ï¼š1~2
 163            * @param  Column èµ·å§‹åˆ—ä½ç½®ï¼ŒèŒƒå›´ï¼š1~16
 164            * @param  Number è¦æ˜¾ç¤ºçš„æ•°å­—ï¼ŒèŒƒå›´ï¼š-32768~32767
 165            * @param  Length è¦æ˜¾ç¤ºæ•°å­—çš„é•¿åº¦ï¼ŒèŒƒå›´ï¼š1~5
 166            * @retval æ— 
 167            */
 168          void LCD_ShowSignedNum(unsigned char Line,unsigned char Column,int Number,unsigned char Length)
 169          {
 170   1              unsigned char i;
 171   1              unsigned int Number1;
 172   1              LCD_SetCursor(Line,Column);
 173   1              if(Number>=0)
 174   1              {
 175   2                      LCD_WriteData('+');
 176   2                      Number1=Number;
 177   2              }
C51 COMPILER V9.54   LCD1602                                                               07/29/2025 15:37:13 PAGE 4   

 178   1              else
 179   1              {
 180   2                      LCD_WriteData('-');
 181   2                      Number1=-Number;
 182   2              }
 183   1              for(i=Length;i>0;i--)
 184   1              {
 185   2                      LCD_WriteData('0' + Number1/LCD_Pow(10,i-1)%10);
 186   2              }
 187   1      }
 188          
 189          /**
 190            * @brief  åœ¨LCD1602æŒ‡å®šä½ç½®å¼€å§‹ä»¥åå…­è¿›åˆ¶æ˜¾ç¤ºæ‰€ç»™æ•°å­—
 191            * @param  Line èµ·å§‹è¡Œä½ç½®ï¼ŒèŒƒå›´ï¼š1~2
 192            * @param  Column èµ·å§‹åˆ—ä½ç½®ï¼ŒèŒƒå›´ï¼š1~16
 193            * @param  Number è¦æ˜¾ç¤ºçš„æ•°å­—ï¼ŒèŒƒå›´ï¼š0~0xFFFF
 194            * @param  Length è¦æ˜¾ç¤ºæ•°å­—çš„é•¿åº¦ï¼ŒèŒƒå›´ï¼š1~4
 195            * @retval æ— 
 196            */
 197          void LCD_ShowHexNum(unsigned char Line,unsigned char Column,unsigned int Number,unsigned char Length)
 198          {
 199   1              unsigned char i,SingleNumber;
 200   1              LCD_SetCursor(Line,Column);
 201   1              for(i=Length;i>0;i--)
 202   1              {
 203   2                      SingleNumber=Number/LCD_Pow(16,i-1)%16;
 204   2                      if(SingleNumber<10)
 205   2                      {
 206   3                              LCD_WriteData('0' + SingleNumber);
 207   3                      }
 208   2                      else
 209   2                      {
 210   3                              LCD_WriteData('A' + SingleNumber - 10);
 211   3                      }
 212   2              }
 213   1      }
 214          
 215          /**
 216            * @brief  åœ¨LCD1602æŒ‡å®šä½ç½®å¼€å§‹ä»¥äºŒè¿›åˆ¶æ˜¾ç¤ºæ‰€ç»™æ•°å­—
 217            * @param  Line èµ·å§‹è¡Œä½ç½®ï¼ŒèŒƒå›´ï¼š1~2
 218            * @param  Column èµ·å§‹åˆ—ä½ç½®ï¼ŒèŒƒå›´ï¼š1~16
 219            * @param  Number è¦æ˜¾ç¤ºçš„æ•°å­—ï¼ŒèŒƒå›´ï¼š0~1111 1111 1111 1111
 220            * @param  Length è¦æ˜¾ç¤ºæ•°å­—çš„é•¿åº¦ï¼ŒèŒƒå›´ï¼š1~16
 221            * @retval æ— 
 222            */
 223          void LCD_ShowBinNum(unsigned char Line,unsigned char Column,unsigned int Number,unsigned char Length)
 224          {
 225   1              unsigned char i;
 226   1              LCD_SetCursor(Line,Column);
 227   1              for(i=Length;i>0;i--)
 228   1              {
 229   2                      LCD_WriteData('0' + Number/LCD_Pow(2,i-1)%2);
 230   2              }
 231   1      }
 232          
 233          
 234          
 235          
 236          
 237          
 238          
 239          
C51 COMPILER V9.54   LCD1602                                                               07/29/2025 15:37:13 PAGE 5   

 240          
 241          
 242          
 243          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    393    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      29
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
